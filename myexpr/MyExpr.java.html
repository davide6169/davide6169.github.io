<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.5.2" />
<meta name="description" content="an open source UNIX framework for shell script based web service provider" />
<meta name="keywords" content="mysvc, shell script, web service, provider, service, soa, template, engine, myste, mysde, mysvcd" />
<link rel="stylesheet" href="../xhtml11.css" type="text/css" />
<link rel="stylesheet" href="../xhtml11-quirks.css" type="text/css" />
<link rel="stylesheet" href="../layout1.css" type="text/css" />
<title>MySVC</title>
</head>
<body>
<div id="layout-banner">
  <div id="layout-title">MySVC</div>
  <div id="layout-description">an open source UNIX framework for shell script based web services provider</div>
</div>
<table>
<tr valign="top">
<td id="layout-menu">
  <div>&#187;<a href="../index.html">Home</a></div>
  <div>&#187;<a href="../tools.html">Tools</a></div>
  <div>&#187;<a href="../manpage.html">Man&nbsp;Page</a></div>
  <div>&#187;<a href="../userguide.html">User&nbsp;Guide</a></div>
  <div>&#187;<a href="../changelog.html">ChangeLog</a></div>
  <div>&#187;<a href="../install.html">Installation</a></div>
  <div>&#187;<a href="../sourcecode.html">Source Code</a></div>
  <div>&#187;<a href="../downloads.html">Downloads</a></div>
  <div>&#187;<a href="../faq.html">FAQ</a></div>
  <div>&#187;<a href="../support.html">Support</a></div>
  <div>&#187;<a href="../license.html">License</a></div>
  <hr/>
  <div>&#187;<a href="../myapps/index.html">My Apps</a></div>
  <div>
  <hr/>
  <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_s-xclick">
  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
  ">
  <input type="image" src="https://www.paypal.com/en_US/IT/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="">
  <img alt="" border="0" src="https://www.paypal.com/it_IT/i/scr/pixel.gif" width="1" height="1">
  </form>
  </div>
</td>
<td>
<div id="layout-content">
<div id="header">
<h1>MyExpr Source Code</h1>
</div>
<h2 id="_myexpr_java">MyExpr.java</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre><tt>// $Id$

//  myexpr - My Service Expression Engine - Version 1.0 (www.mysvc.it)
//  Copyright (C) 2009 Davide Cucciniello &lt;davide6169@gmail.com&gt;
//
//  This program is free software: you can redistribute it and/or modify
//  it under the terms of the GNU General Public License as published by
//  the Free Software Foundation, either version 3 of the License, or
//  (at your option) any later version.
//
//  This program is distributed in the hope that it will be useful,
//  but WITHOUT ANY WARRANTY; without even the implied warranty of
//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//  GNU General Public License for more details.
//
//  You should have received a copy of the GNU General Public License
//  along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.

/* **********************************************************************
 *
 *  ***   **        *** **  **  ****
 *   **  **        *  *  *  ** **  *
 *   *** **  **  * ***   *  *  *
 *   * ** *   * **   **   * *  *
 *   * *  *   * *  *  *   **   **
 *  ***  ***   **  ***     *    ****
 *             *
 *            *
 *
 *  My Service
 *
 * ***********************************************************************
 *
 *  ***   **       *****
 *   **  **         *  *
 *   *** **  **  *  ***  ***** ****  ****
 *   * ** *   * **  *     ***   *  *  * *
 *   * *  *   * *   *  *  ***   *  *  *
 *  ***  ***   **  ***** ** **  ***  ***
 *             *                *
 *            *                ***
 *
 *  My Service Expression Engine
 *
 *  File: MyExpr.java
 *
 *  Description:
 *    class MyExpr: Syntax tree of a propositional logic expression
 *    MyExpr: Java library implementing an advanced generic
 *    expression parser based on precedence operator
 *
 * ***********************************************************************
 *
 *  History:
 *    1.0               first version
 *
 * *********************************************************************** */

package it.mysvc.myexpr.example;

import it.mysvc.myexpr.*;

public class MyExpr extends Expr
{
  public MyExpr()
  {
  }

  public MyExpr(int code)
  {
    super(code);
  }

  public MyExpr(int code,String info)
  {
    super(code,info);
  }

  public MyExpr(int unaryOperator,Expr left)
  {
    super(unaryOperator,left);
  }

  public MyExpr(int unaryOperator,Expr left,boolean prefix)
  {
    super(unaryOperator,left,prefix);
  }

  public MyExpr(int unaryOperator,String info,Expr left)
  {
    super(unaryOperator,info,left);
  }

  public MyExpr(int unaryOperator,String info,Expr left,boolean prefix)
  {
    super(unaryOperator,info,left,prefix);
  }

  public MyExpr(int binaryOperator,Expr left,Expr right)
  {
    super(binaryOperator,left,right);
  }

  public MyExpr(int binaryOperator,String info,Expr left,Expr right)
  {
    super(binaryOperator,info,left,right);
  }

  public MyExpr X()
  {
    return (MyExpr)getLeft();
  }

  public MyExpr Y()
  {
    return (MyExpr)getRight();
  }

  public void setX(MyExpr x)
  {
    setLeft(x);
  }

  public void setY(MyExpr y)
  {
    setRight(y);
  }

  public int value()
  {
    if(isVariable())
      return getCode();
    else
      return -(X().getCode());
  }

  public boolean isTrue()
  {
    return isOperand()&amp;&amp;(getCode()==MyExprOperators.TRUE);
  }

  public boolean isFalse()
  {
    return isOperand()&amp;&amp;(getCode()==MyExprOperators.FALSE);
  }

  public boolean isConst()
  {
    return isTrue()||isFalse();
  }

  public boolean isNot()
  {
    return isUnaryOperator()&amp;&amp;(getCode()==MyExprOperators.NOT);
  }

  public boolean isNotOperand()
  {
    return isNot()&amp;&amp;getLeft().isOperand();
  }

  public boolean isLiteral()
  {
    return isOperand()||isNotOperand();
  }

  public boolean isAnd()
  {
    return isBinaryOperator()&amp;&amp;(getCode()==MyExprOperators.AND);
  }

  public boolean isOr()
  {
    return isBinaryOperator()&amp;&amp;(getCode()==MyExprOperators.OR);
  }

  public boolean isImplies()
  {
    return isBinaryOperator()&amp;&amp;(getCode()==MyExprOperators.IMPLIES);
  }

  public boolean isEquivalent()
  {
    return isBinaryOperator()&amp;&amp;(getCode()==MyExprOperators.EQUIVALENT);
  }

  public boolean isNotNot()
  {
    return isNot()&amp;&amp;((MyExpr)getLeft()).isNot();
  }

  public boolean isNotAnd()
  {
    return isNot()&amp;&amp;((MyExpr)getLeft()).isAnd();
  }

  public boolean isNotOr()
  {
    return isNot()&amp;&amp;((MyExpr)getLeft()).isOr();
  }

  public boolean isNotTrue()
  {
    return isNot()&amp;&amp;((MyExpr)getLeft()).isTrue();
  }

  public boolean isNotFalse()
  {
    return isNot()&amp;&amp;((MyExpr)getLeft()).isFalse();
  }

  public boolean isTrueAndX()
  {
    return isAnd()&amp;&amp;((MyExpr)getLeft()).isTrue();
  }

  public boolean isXAndTrue()
  {
    return isAnd()&amp;&amp;((MyExpr)getRight()).isTrue();
  }

  public boolean isFalseAndX()
  {
    return isAnd()&amp;&amp;((MyExpr)getLeft()).isFalse();
  }

  public boolean isXAndFalse()
  {
    return isAnd()&amp;&amp;((MyExpr)getRight()).isFalse();
  }

  public boolean isTrueOrX()
  {
    return isOr()&amp;&amp;((MyExpr)getLeft()).isTrue();
  }

  public boolean isXOrTrue()
  {
    return isOr()&amp;&amp;((MyExpr)getRight()).isTrue();
  }

  public boolean isFalseOrX()
  {
    return isOr()&amp;&amp;((MyExpr)getLeft()).isFalse();
  }

  public boolean isXOrFalse()
  {
    return isOr()&amp;&amp;((MyExpr)getRight()).isFalse();
  }

  public boolean isVariable()
  {
    return isOperand();
  }

  public boolean isUnknown(int t)
  {
    return (t == -1);
  }

  public boolean isTrue(int t)
  {
    return (t == 1);
  }

  public boolean isFalse(int t)
  {
    return (t == 0);
  }

  public int getTruth()
  {
    if(isAnd())
    {
      int x = X().getTruth();

      if(isFalse(x))
        return 0;
      else if(isTrue(x))
        return Y().getTruth();
      else if(isFalse(Y().getTruth()))
        return 0;
      else
        return -1;
    }
    else if(isOr())
    {
      int x = X().getTruth();

      if(isTrue(x))
        return 1;
      else if(isFalse(x))
        return Y().getTruth();
      else if(isTrue(Y().getTruth()))
        return 1;
      else
        return -1;
    }
    else if(isImplies())
    {
      int x = X().getTruth();

      if(isFalse(x))
        return 1;
      else if(isTrue(x))
        return Y().getTruth();
      else if(isTrue(Y().getTruth()))
        return 1;
      else
        return -1;
    }
    else if(isEquivalent())
    {
      int x = X().getTruth();

      if(isUnknown(x))
        return -1;
      else
      {
        int y = Y().getTruth();

        if(isUnknown(y))
          return -1;
        else if(x == y)
          return 1;
        else
          return 0;
      }
    }
    else if(isVariable())
    {
      if(isTrue())
        return 1;
      else if(isFalse())
        return 0;
      else
        return -1;
    }
    else if(isNot())
    {
      int x = X().getTruth();

      if(isTrue(x))
        return 0;
      else if(isFalse(x))
        return 1;
      else
        return -1;
    }
    else
      return -1;
  }

  public static MyExpr Variable(int code)
  {
    return new MyExpr(code);
  }

  public static MyExpr Variable(int code,String info)
  {
    return new MyExpr(code,info);
  }

  public static MyExpr Not(MyExpr expr)
  {
    return new MyExpr(MyExprOperators.NOT,expr);
  }

  public static MyExpr Not(String info,MyExpr expr)
  {
    return new MyExpr(MyExprOperators.NOT,info,expr);
  }

  public static MyExpr And(MyExpr left,MyExpr right)
  {
    return new MyExpr(MyExprOperators.AND,left,right);
  }

  public static MyExpr And(String info,MyExpr left,MyExpr right)
  {
    return new MyExpr(MyExprOperators.AND,info,left,right);
  }

  public static MyExpr Or(MyExpr left,MyExpr right)
  {
    return new MyExpr(MyExprOperators.OR,left,right);
  }

  public static MyExpr Or(String info,MyExpr left,MyExpr right)
  {
    return new MyExpr(MyExprOperators.OR,info,left,right);
  }

  public static MyExpr Implies(MyExpr left,MyExpr right)
  {
    return new MyExpr(MyExprOperators.IMPLIES,left,right);
  }

  public static MyExpr Implies(String info,MyExpr left,MyExpr right)
  {
    return new MyExpr(MyExprOperators.IMPLIES,info,left,right);
  }

  public static MyExpr Equivalent(MyExpr left,MyExpr right)
  {
    return new MyExpr(MyExprOperators.EQUIVALENT,left,right);
  }

  public static MyExpr Equivalent(String info,MyExpr left,MyExpr right)
  {
    return new MyExpr(MyExprOperators.EQUIVALENT,info,left,right);
  }

  public static MyExpr True()
  {
    return new MyExpr(MyExprOperators.TRUE);
  }

  public static MyExpr True(String info)
  {
    return new MyExpr(MyExprOperators.TRUE,info);
  }

  public static MyExpr False()
  {
    return new MyExpr(MyExprOperators.FALSE);
  }

  public static MyExpr False(String info)
  {
    return new MyExpr(MyExprOperators.FALSE,info);
  }

  public MyExpr rewriteImplies()
  {
    if(isImplies())
      return Or(Not(X()),Y());
    else if(isUnaryOperator())
    {
      setX(X().rewriteImplies());

      return this;
    }
    else if(isBinaryOperator())
    {
      setX(X().rewriteImplies());
      setY(Y().rewriteImplies());

      return this;
    }
    else
      return this;
  }

  public MyExpr rewriteEquivalent()
  {
    if(isEquivalent())
      return And(Or(Not(X()),Y()),Or(Not(Y()),X()));
    else if(isUnaryOperator())
    {
      setX(X().rewriteEquivalent());

      return this;
    }
    else if(isBinaryOperator())
    {
      setX(X().rewriteEquivalent());
      setY(Y().rewriteEquivalent());

      return this;
    }
    else
      return this;
  }

  public MyExpr reduceNNF()
  {
    MyExpr e = this;

    while(e.isNotNot())
      e = e.X().X();

    if(e.isNotTrue())
      return False();
    else if(e.isNotFalse())
      return True();
    else if(isNotOr())
      e = And(Not(e.X().X()),Not(e.X().Y()));
    else if(isNotAnd())
      e = Or(Not(e.X().X()),Not(e.X().Y()));

    if(e.isBinaryOperator())
    {
      e.setX(e.X().reduceNNF());
      e.setY(e.Y().reduceNNF());
    }

    return e;
  }

  public MyExpr normalize()
  {
    MyExpr e = this;

    e = e.rewriteImplies();
    e = e.rewriteEquivalent();
    e = e.reduceNNF();

    return e;
  }

  int Value()
  {
    if(isVariable())
      return getCode();
    else
      return -(X().getCode());
  }

  public MyExpr remove()
  {
    if(isVariable())
      return this;
    else if(isUnaryOperator())
      setX(X().remove());
    else
    {
      setX(X().remove());
      setY(Y().remove());
    }

    if(isTrueAndX())
      return Y();
    else if(isXAndTrue())
      return X();
    else if(isTrueOrX()||isXOrTrue())
      return True();
    else if(isNotTrue())
      return False();
    else if(isNotFalse())
      return True();
    else if(isFalseOrX())
      return Y();
    else if(isXOrFalse())
      return X();
    else if(isFalseAndX()||isXAndFalse())
      return False();
    else
      return this;
  }

  public MyExpr simplify()
  {
    return remove();
  }
}

/* end of file */</tt></pre>
</div></div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.400<br />
Last updated 2014-06-28 16:23:51 CEST
</div>
<div id="footer-badges">
<img style="border:none; width:88px; height:31px;"
     src="../images/gplv3-127x51.png"
     alt="GPL Version 3" />
<!-- Histats.com  START  -->
<a href="http://www.histats.com" target="_blank" title="simple hit counter" >
<script  type="text/javascript" language="javascript">
var s_sid = 675659;var st_dominio = 4;
var cimg = 0;var cwi =112;var che =48;
</script></a><script  type="text/javascript" language="javascript" src="http://s10.histats.com/js9.js"></script>
<noscript><a href="http://www.histats.com" target="_blank">
<img  src="http://s4.histats.com/stats/0.gif?675659&1" alt="simple hit counter" border="0"></a>
</noscript>
<!-- Histats.com  END  -->
</div>
</div>
</div>
</td>
</tr>
</table>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-11334618-1");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>
